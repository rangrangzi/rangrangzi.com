    var song_list = [{
        "song_name": "童话",
        "singer": "光良",
        "singer_img": "img/1.jpg",
        "song_url": "media/tonghua.mp3",
        "num":0
    }, {
        "song_name": "我的楼兰",
        "singer": "云朵",
        "singer_img": "img/2.jpg",
        "song_url": "media/loulan.mp3",
        "num":1
    }];
    var lrc_list = ["[00:00]童话\n" +
    "[00:03]制作：慕黑\n" +
    "[00:05]QQ：261970157\n" +
    "[00:07]本歌仅献给我心爱的女孩--秋玲\n" +
    "[00:10]秋玲，我爱你直到永远\n" +
    "[00:13]忘了有多久\n" +
    "[00:16]再没听到你\n" +
    "[00:20]对我说你最爱的故事\n" +
    "[00:27]我想了很久\n" +
    "[00:30]我开始慌了\n" +
    "[00:34]是不是我又做错什么\n" +
    "[00:40]\n" +
    "[00:41]你哭着对我说\n" +
    "[00:44]童话里都是骗人的\n" +
    "            [00:48]我不可能是你的王子\n" +
    "            [00:55]也许你不会懂\n" +
    "            [00:58]从你说爱我以后\n" +
    "            [01:02]我的天空星星都亮了\n" +
    "            [01:09]\n" +
    "            [01:09]我愿变成童话里\n" +
    "            [01:13]你爱的那个天使\n" +
    "            [01:16]张开双手\n" +
    "            [01:19]变成翅膀守护你\n" +
    "            [01:22]你要相信\n" +
    "            [01:26]相信我们会像童话故事里\n" +
    "            [01:30]幸福和快乐是结局\n" +
    "            [01:37]\n" +
    "            [01:48]你哭着对我说\n" +
    "            [01:51]童话里都是骗人的\n" +
    "            [01:55]我不可能是你的王子\n" +
    "            [02:02]也许你不会懂\n" +
    "            [02:05]从你说爱我以后\n" +
    "            [02:08]我的天空星星都亮了\n" +
    "            [02:15]\n" +
    "            [02:16]我愿变成童话里\n" +
    "            [02:20]你爱的那个天使\n" +
    "            [02:23]张开双手\n" +
    "            [02:25]变成翅膀守护你\n" +
    "            [02:30]你要相信\n" +
    "            [02:32]相信我们会像童话故事里\n" +
    "            [02:37]幸福和快乐是结局\n" +
    "            [02:44]我要变成童话里\n" +
    "            [02:48]你爱的那个天使\n" +
    "            [02:51]张开双手\n" +
    "            [02:53]变成翅膀守护你\n" +
    "            [02:58]你要相信\n" +
    "            [03:00]相信我们会像童话故事里\n" +
    "            [03:06]幸福和快乐是结局\n" +
    "            [03:12]我会变成童话里\n" +
    "            [03:16]你爱的那个天使\n" +
    "            [03:19]张开双手\n" +
    "            [03:21]变成翅膀守护你\n" +
    "            [03:26]你要相信\n" +
    "            [03:28]相信我们会像童话故事里\n" +
    "            [03:34]幸福和快乐是结局\n" +
    "            [03:41]哦...\n" +
    "            [03:44]一起写\n" +
    "            [03:46]我们的\n" +
    "            [03:48]结局\n" +
    "            [03:56]end"
    ,"[00:00]我的楼兰 - 云朵\n" +
        "            [00:36]想问沙漠借那一根曲线\n" +
        "            [00:42]缝件披风为你御寒\n" +
        "            [00:51]用肺腑去触摸你的灵魂\n" +
        "            [00:57]我就在那只火炉边取暖\n" +
        "            [01:06]想问姻缘借那一根红线\n" +
        "            [01:12]深埋生命血脉相连\n" +
        "            [01:21]用丝绸去润泽你的肌肤\n" +
        "            [01:27]我就在那个怀抱里缠绵\n" +
        "            [01:36]你总是随手把银簪\n" +
        "            [01:39]插在太阳上面\n" +
        "            [01:42]万道光芒蓬松着你长发的波澜\n" +
        "            [01:48]我闻着芬芳跋涉着无限远\n" +
        "            [01:54]只为看清你的容颜\n" +
        "            [02:00]你总不小心把倩影\n" +
        "            [02:03]靠在月亮上面\n" +
        "            [02:06]万顷月光舞动着你优美的梦幻\n" +
        "            [02:12]我闻着芬芳跋涉着无限远\n" +
        "            [02:18]只为看清你的容颜\n" +
        "            [02:27]谁与美人共浴沙河互为一天地\n" +
        "            [02:33]谁与美人共枕夕阳长醉两千年\n" +
        "            [02:39]从未说出我是你的尘埃\n" +
        "            [02:45]但你却是我的楼兰\n" +
        "            [03:15]想问姻缘借那一根红线\n" +
        "            [03:21]深埋生命血脉相连\n" +
        "            [03:30]用丝绸去润泽你的肌肤\n" +
        "            [03:36]我就在那个怀抱里缠绵\n" +
        "            [03:45]你总是随手把银簪\n" +
        "            [03:48]插在太阳上面\n" +
        "            [03:51]万道光芒蓬松着你长发的波澜\n" +
        "            [03:57]我闻着芬芳跋涉着无限远\n" +
        "            [04:03]只为看清你的容颜\n" +
        "            [04:09]你总不小心把倩影\n" +
        "            [04:12]靠在月亮上面\n" +
        "            [04:15]万顷月光舞动着你优美的梦幻\n" +
        "            [04:21]我闻着芬芳跋涉着无限远\n" +
        "            [04:27]只为看清你的容颜\n" +
        "            [04:36]谁与美人共浴沙河互为一天地\n" +
        "            [04:42]谁与美人共枕夕阳长醉两千年\n" +
        "            [04:48]从未说出我是你的尘埃\n" +
        "            [04:54]但你却是我的楼兰"];
    var volume,lrc_txt = [],lrc_time = [],open_lrc = true;
    var song = document.getElementById("my_audio");
    var songmsg = {
        sTomin:function(s){
            var h;
            h  =   Math.floor(s/60);
            s  =   s%60;
            h    +=    '';
            s    +=    '';
            h  =   (h.length==1)?'0'+h:h;
            s  =   (s.length==1)?'0'+s:s;
            s = parseInt(s);
            if(s<10){
                s = "0"+s;
            }
            return h+':'+s;
        },
        time_to_sec:function(time){
            var s = '';

            var min = time.split(':')[0];
            var sec = time.split(':')[1];

            s = Number(min*60) + Number(sec);

            return s;
        },
        songPause:function () {
            song.pause();
            $("#cover").removeClass("btn_pause").addClass("btn_play");
        },
        songPlay:function () {
            //layer.msg('播放开始', {icon: 1});
            song.play();
            $("#cover").removeClass("btn_play").addClass("btn_pause");
        },
        nextSong:function () {
            var next_num = song.getAttribute("data-num");
            next_num++;
            if(next_num >= song_list.length){
                layer.msg('这已经是最后一首了！', {icon: 2});
                return;
            }else{
                this.controlSong(next_num);
            }
        },
        prveSong:function () {
            var next_num = song.getAttribute("data-num");
            next_num--;
            if(next_num < 0){
                layer.msg('这已经是第一首了！', {icon: 2});
                return;
            }else{
                this.controlSong(next_num);
            }
        },
        controlSong:function (next_num) {
            song.setAttribute("data-num",next_num);
            song.src = song_list[next_num].song_url;
            songmsg.setMsg(next_num);
            songmsg.songPlay();
        },
        songMuted:function (isMuted) {
            if (isMuted){
                $(".vlue-icon i").addClass("v_c").removeClass("v_o");
            }else {
                $(".vlue-icon i").addClass("v_o").removeClass("v_c");
            }
            song.muted = isMuted;
        },
        setPos:function (pos) { //设置当前时间
            song.currentTime = pos;
        },
        setVolume:function (volume) {
            song.volume = volume;
        },
        setMsg(data_num){
            $(".song img").attr("src",song_list[data_num].singer_img);
            $("#goSinger").text(song_list[data_num].singer+" - "+song_list[data_num].song_name);
            this.getLrc(data_num);
        },
        setTotaltime:function () {
            $("#totalTime").text(songmsg.sTomin(song.duration));
        },
        setLrc:function(currentTime){
            for (var i = 0;i<lrc_time.length;i++){
                if(currentTime>=songmsg.time_to_sec(lrc_time[i])){
                    if(i>=9){
                        $("[data-idd='"+(i-9)+"']").css("display","none");
                    }else{
                        $("[data-idd]").css("display","block");
                    }
                    $("[data-idd='"+i+"']").css({"color":"deeppink"});
                    $(".cover_container [data-idd!='"+i+"']").css('color',"#fff");
                }else{
                    $("[data-idd='"+(i-9)+"']").css("display","block");
                }
            }
        },
        getLrc:function (id) {
            var arrTxt;
            var list_array = lrc_list[id].split("\n");
            lrc_time.splice(0, lrc_time.length);
            lrc_txt.splice(0, lrc_txt.length);
            for (var i=0;i<list_array.length;i++){
                arrTxt = list_array[i].split("]");
                lrc_time.push(arrTxt[0].split("[")[1]);
                lrc_txt.push(arrTxt[1]);
            }
            if(lrc_txt.length != 0){
                var a = [];
                for (var i = 0;i<lrc_txt.length;i++){
                    a.push("<p data-idd='"+i+"'>"+lrc_txt[i]+"</p>");
                }
                $(".cover_container").html(a.join(""));
            }else{
                $(".cover_container").html("<p style='padding-top: 60%'>暂无歌词</p>");
            }
        },
        loadRotationChart:function(){
            var a = ["img/bg1.jpg","img/bg2.jpg"];
            var imgfile = [];
            for (var i in a){
                imgfile.push('<div class="banner" style="background-image: url('+a[i]+');"></div>');
            }
            $("#bg").find('div').html(imgfile.join(''));
            layui.use(['carousel', 'form'], function(){
                var carousel = layui.carousel,form = layui.form;;
                carousel.render({
                    elem: '#bg'
                    ,arrow:'none'
                    ,interval: 5000
                    ,anim: 'fade'
                    ,height: '100%'
                    ,width:'100%'
                    ,indicator:'none'
                    ,autoplay:true
                });
            });
        }
    }
    song.addEventListener('timeupdate', function() {
        curtime = parseInt(song.currentTime,10);
        var bar = (curtime/song.duration)*100;
        bar = bar.toFixed(2);
        $("#play_on").css({"transform":"translateX("+bar+"%)"});
        $("#currentTime").text(songmsg.sTomin(curtime));
        //如果显示歌词打开则调用歌词函数
        if(open_lrc){
            songmsg.setLrc(song.currentTime);
        }
    });
    song.addEventListener("ended", function() {
        var data_num = song.getAttribute("data-num");
        if(data_num == song_list.length-1){
            songmsg.songPause();
        }else{
            $("#play_right").click();
        }
    });
    song.addEventListener("playing",function () {
        songmsg.setTotaltime();
    });
    song.addEventListener('error', function(){
        layer.msg('数据错误！', {icon: 2});
    });